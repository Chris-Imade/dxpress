<!-- Admin Dashboard Overview -->
<div class="dashboard-card" style="margin-bottom: 24px;">
    <div class="card-header">
        <div class="card-icon" style="background: linear-gradient(135deg, #032330, #1a4c5a);">
            <i class="fas fa-chart-line"></i>
        </div>
        <div>
            <div class="card-title">Production Admin Dashboard</div>
            <div class="card-subtitle">Advanced analytics & system management</div>
        </div>
        <div style="margin-left: auto; display: flex; gap: 10px;">
            <a href="/admin/users" class="btn btn-secondary">
                <i class="fas fa-users"></i>
                Manage Users
            </a>
            <a href="/admin/notifications" class="btn btn-primary">
                <i class="fas fa-bell"></i>
                Send Notification
            </a>
        </div>
    </div>
</div>

<!-- Key Performance Metrics -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 24px;">
    <div class="stat-card">
        <div class="stat-icon" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);">
            <i class="fas fa-users"></i>
        </div>
        <div class="stat-content">
            <div class="stat-number"><%= analytics.totalUsers || 0 %></div>
            <div class="stat-label">Total Users</div>
            <div class="stat-change positive">+<%= analytics.newUsersToday || 0 %> today | <%= analytics.activeUsers || 0 %> active</div>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon" style="background: linear-gradient(135deg, #10b981, #059669);">
            <i class="fas fa-box"></i>
        </div>
        <div class="stat-content">
            <div class="stat-number"><%= analytics.totalShipments || 0 %></div>
            <div class="stat-label">Total Shipments</div>
            <div class="stat-change positive">+<%= analytics.shipmentsThisMonth || 0 %> this month</div>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
            <i class="fas fa-pound-sign"></i>
        </div>
        <div class="stat-content">
            <div class="stat-number">£<%= (analytics.totalRevenue || 0).toLocaleString() %></div>
            <div class="stat-label">Total Revenue</div>
            <div class="stat-change positive">£<%= (analytics.monthlyRevenue || 0).toLocaleString() %> this month</div>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">
            <i class="fas fa-chart-line"></i>
        </div>
        <div class="stat-content">
            <div class="stat-number"><%= analytics.deliveryRate || 0 %>%</div>
            <div class="stat-label">Delivery Success Rate</div>
            <div class="stat-change positive"><%= analytics.onTimeDeliveries || 0 %> on-time deliveries</div>
        </div>
    </div>
</div>

<!-- System Health & Performance -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 24px;">
    <div class="stat-card">
        <div class="stat-icon" style="background: linear-gradient(135deg, #ef4444, #dc2626);">
            <i class="fas fa-exclamation-triangle"></i>
        </div>
        <div class="stat-content">
            <div class="stat-number"><%= analytics.pendingShipments || 0 %></div>
            <div class="stat-label">Pending Shipments</div>
            <div class="stat-change neutral">Requires attention</div>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon" style="background: linear-gradient(135deg, #06b6d4, #0891b2);">
            <i class="fas fa-server"></i>
        </div>
        <div class="stat-content">
            <div class="stat-number"><%= analytics.uptimePercent || 0 %>%</div>
            <div class="stat-label">System Uptime</div>
            <div class="stat-change positive"><%= analytics.uptimeHours || 0 %> hours</div>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon" style="background: linear-gradient(135deg, #84cc16, #65a30d);">
            <i class="fas fa-memory"></i>
        </div>
        <div class="stat-content">
            <div class="stat-number"><%= analytics.memoryUsedMB || 0 %>MB</div>
            <div class="stat-label">Memory Usage</div>
            <div class="stat-change neutral">/ <%= analytics.memoryTotalMB || 0 %>MB total</div>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon" style="background: linear-gradient(135deg, #ec4899, #db2777);">
            <i class="fas fa-envelope"></i>
        </div>
        <div class="stat-content">
            <div class="stat-number"><%= analytics.totalSubscribers || 0 %></div>
            <div class="stat-label">Newsletter Subscribers</div>
            <div class="stat-change neutral">Awaiting processing</div>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon" style="background: linear-gradient(135deg, #ef4444, #dc2626);">
            <i class="fas fa-dollar-sign"></i>
        </div>
        <div class="stat-content">
            <div class="stat-number">$<%= counts.totalRevenue || 0 %></div>
            <div class="stat-label">Total Revenue</div>
            <div class="stat-change positive">+$<%= counts.revenueToday || 0 %> today</div>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">
            <i class="fas fa-envelope"></i>
        </div>
        <div class="stat-content">
            <div class="stat-number"><%= counts.newsletters || 0 %></div>
            <div class="stat-label">Newsletter Subscribers</div>
            <div class="stat-change neutral">Active subscribers</div>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon" style="background: linear-gradient(135deg, #06b6d4, #0891b2);">
            <i class="fas fa-bell"></i>
        </div>
        <div class="stat-content">
            <div class="stat-number"><%= counts.notifications || 0 %></div>
            <div class="stat-label">Notifications Sent</div>
            <div class="stat-change neutral">This month</div>
        </div>
    </div>
</div>

<!-- Recent Shipments Table -->
<div class="table-container" style="margin-bottom: 24px;">
    <div class="table-header">
        <h3 class="table-title">Recent Shipments</h3>
        <a href="/admin/shipments" class="btn btn-secondary">
            <i class="fas fa-eye"></i>
            View All
        </a>
    </div>
    <div style="overflow-x: auto;">
        <table>
            <thead>
                <tr>
                    <th style="padding: 16px; text-align: left; font-weight: 600; color: #374151;">Tracking ID</th>
                    <th style="padding: 16px; text-align: left; font-weight: 600; color: #374151;">Customer</th>
                    <th style="padding: 16px; text-align: left; font-weight: 600; color: #374151;">Route</th>
                    <th style="padding: 16px; text-align: left; font-weight: 600; color: #374151;">Status</th>
                    <th style="padding: 16px; text-align: left; font-weight: 600; color: #374151;">Date</th>
                    <th style="padding: 16px; text-align: center; font-weight: 600; color: #374151;">Actions</th>
                </tr>
            </thead>
            <tbody>
                <% if (recentShipments && recentShipments.length > 0) { %>
                    <% recentShipments.forEach(function(shipment) { %>
                    <tr style="border-bottom: 1px solid #f3f4f6;">
                        <td style="padding: 16px; font-weight: 600; color: #032330;"><%= shipment.trackingId %></td>
                        <td style="padding: 16px;">
                            <div style="font-weight: 600; color: #374151;"><%= shipment.customerName %></div>
                            <div style="font-size: 12px; color: #6b7280;"><%= shipment.customerEmail %></div>
                        </td>
                        <td style="padding: 16px;">
                            <div style="display: flex; align-items: center; gap: 8px; font-size: 14px;">
                                <div style="display: flex; flex-direction: column; align-items: center;">
                                    <div style="width: 8px; height: 8px; background: #10b981; border-radius: 50%; margin-bottom: 4px;"></div>
                                    <div style="width: 2px; height: 20px; background: #e5e7eb;"></div>
                                    <div style="width: 8px; height: 8px; background: #ef4444; border-radius: 50%; margin-top: 4px;"></div>
                                </div>
                                <div style="flex: 1;">
                                    <div style="font-weight: 600; color: #374151; margin-bottom: 4px;">
                                        <i class="fas fa-map-marker-alt" style="color: #10b981; margin-right: 4px;"></i>
                                        <%= shipment.origin.city || shipment.origin %>, <%= shipment.origin.country || '' %>
                                    </div>
                                    <div style="font-weight: 600; color: #374151;">
                                        <i class="fas fa-map-marker-alt" style="color: #ef4444; margin-right: 4px;"></i>
                                        <%= shipment.destination.city || shipment.destination %>, <%= shipment.destination.country || '' %>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td style="padding: 16px; text-align: right;">
                            <% let statusClass = 'pending'; %>
                            <% if (shipment.status === 'Delivered') statusClass = 'delivered'; %>
                            <% if (shipment.status === 'In Transit') statusClass = 'transit'; %>
                            <% if (shipment.status === 'Cancelled') statusClass = 'cancelled'; %>
                            <span class="status-badge <%= statusClass %>"><%= shipment.status %></span>
                        </td>
                        <td style="padding: 16px; color: #6b7280;"><%= new Date(shipment.createdAt).toLocaleDateString() %></td>
                        <td style="padding: 16px; text-align: center;">
                            <a href="/admin/shipments/edit/<%= shipment._id %>" style="padding: 8px; background: #f3f4f6; border: none; border-radius: 6px; color: #6b7280; text-decoration: none; transition: all 0.2s ease; display: inline-block;">
                                <i class="fas fa-edit"></i>
                            </a>
                        </td>
                    </tr>
                    <% }); %>
                <% } else { %>
                    <tr>
                        <td colspan="6" style="padding: 40px; text-align: center; color: #6b7280;">
                            <i class="fas fa-box" style="font-size: 48px; margin-bottom: 16px; opacity: 0.3;"></i>
                            <div>No recent shipments found</div>
                        </td>
                    </tr>
                <% } %>
            </tbody>
        </table>
    </div>
</div>

<!-- System Analytics -->  
<div class="dashboard-card" style="margin-bottom: 24px;">
    <div class="card-header">
        <div class="card-icon" style="background: linear-gradient(135deg, #06b6d4, #0891b2);">
            <i class="fas fa-chart-bar"></i>
        </div>
        <div>
            <div class="card-title">System Analytics</div>
            <div class="card-subtitle">Real-time system performance metrics</div>
        </div>
    </div>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-top: 16px;">
        <div style="text-align: center; padding: 16px; background: #f8fafc; border-radius: 8px;">
            <div style="font-size: 24px; font-weight: 700; color: #032330;"><%= counts.activeUsers || 0 %></div>
            <div style="font-size: 12px; color: #6b7280;">Active Users (24h)</div>
        </div>
        <div style="text-align: center; padding: 16px; background: #f8fafc; border-radius: 8px;">
            <div style="font-size: 24px; font-weight: 700; color: #032330;"><%= counts.shipmentsToday || 0 %></div>
            <div style="font-size: 12px; color: #6b7280;">Shipments Today</div>
        </div>
        <div style="text-align: center; padding: 16px; background: #f8fafc; border-radius: 8px;">
            <div style="font-size: 24px; font-weight: 700; color: #032330;"><%= counts.avgDeliveryTime || 0 %> days</div>
            <div style="font-size: 12px; color: #6b7280;">Avg Delivery Time</div>
        </div>
        <div style="text-align: center; padding: 16px; background: #f8fafc; border-radius: 8px;">
            <div style="font-size: 24px; font-weight: 700; color: #032330;"><%= counts.systemUptime || '99.9' %>%</div>
            <div style="font-size: 12px; color: #6b7280;">System Uptime</div>
        </div>
    </div>
</div>

<!-- Quick Actions Grid -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
    <div class="dashboard-card">
        <div class="card-header">
            <div class="card-icon" style="background: linear-gradient(135deg, #06b6d4, #0891b2);">
                <i class="fas fa-bell"></i>
            </div>
            <div>
                <div class="card-title">Send Notifications</div>
                <div class="card-subtitle">Create and send notifications to users</div>
            </div>
        </div>
        <div style="margin-top: 16px;">
            <a href="/admin/notifications" class="btn btn-primary" style="width: 100%; justify-content: center;">
                <i class="fas fa-plus"></i>
                Create Notification
            </a>
        </div>
    </div>
    
    <div class="dashboard-card">
        <div class="card-header">
            <div class="card-icon" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);">
                <i class="fas fa-users"></i>
            </div>
            <div>
                <div class="card-title">User Management</div>
                <div class="card-subtitle">Manage all registered users</div>
            </div>
        </div>
        <div style="margin-top: 16px;">
            <a href="/admin/users" class="btn btn-secondary" style="width: 100%; justify-content: center;">
                <i class="fas fa-users"></i>
                Manage Users
            </a>
        </div>
    </div>
    
    <div class="dashboard-card">
        <div class="card-header">
            <div class="card-icon" style="background: linear-gradient(135deg, #10b981, #059669);">
                <i class="fas fa-box"></i>
            </div>
            <div>
                <div class="card-title">Shipment Overview</div>
                <div class="card-subtitle">Monitor all shipments</div>
            </div>
        </div>
        <div style="margin-top: 16px;">
            <a href="/admin/shipments" class="btn btn-secondary" style="width: 100%; justify-content: center;">
                <i class="fas fa-box"></i>
                View All Shipments
            </a>
        </div>
    </div>
    
    <div class="dashboard-card">
        <div class="card-header">
            <div class="card-icon" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">
                <i class="fas fa-envelope"></i>
            </div>
            <div>
                <div class="card-title">Newsletter Campaign</div>
                <div class="card-subtitle">Create rich newsletters</div>
            </div>
        </div>
        <div style="margin-top: 16px;">
            <a href="/admin/newsletter" class="btn btn-secondary" style="width: 100%; justify-content: center;">
                <i class="fas fa-edit"></i>
                Create Newsletter
            </a>
        </div>
    </div>
    
    <div class="dashboard-card">
        <div class="card-header">
            <div class="card-icon" style="background: linear-gradient(135deg, #ef4444, #dc2626);">
                <i class="fas fa-chart-line"></i>
            </div>
            <div>
                <div class="card-title">Revenue Analytics</div>
                <div class="card-subtitle">Financial performance tracking</div>
            </div>
        </div>
        <div style="margin-top: 16px;">
            <a href="/admin/analytics" class="btn btn-secondary" style="width: 100%; justify-content: center;">
                <i class="fas fa-chart-bar"></i>
                View Analytics
            </a>
        </div>
    </div>
    
    <div class="dashboard-card">
        <div class="card-header">
            <div class="card-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
                <i class="fas fa-cog"></i>
            </div>
            <div>
                <div class="card-title">System Settings</div>
                <div class="card-subtitle">Configure system preferences</div>
            </div>
        </div>
        <div style="margin-top: 16px;">
            <a href="/admin/settings" class="btn btn-secondary" style="width: 100%; justify-content: center;">
                <i class="fas fa-cog"></i>
                Settings
            </a>
        </div>
    </div>
</div>

